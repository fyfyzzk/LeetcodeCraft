记得要改变每次读取buf的地址
不要修改buf变量，而是用一个tmp变量会比较安全。

